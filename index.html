<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kotoba Revision</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card-container {
            perspective: 1000px;
        }
        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .flashcard.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border-radius: 1rem;
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card-back {
            transform: rotateY(180deg);
            background-color: #f3f4f6;
        }
        .finish-animation {
            animation: fadeInScale 0.8s ease-in-out forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .checkbox-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 9999px;
            background-color: #f0f4f8;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .checkbox-container:hover {
            background-color: #e2e8f0;
        }
        .checkbox-container.selected {
            background-color: #6366f1;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #4338ca;
        }
        .checkbox-container.selected:hover {
            background-color: #4f46e5;
        }
        .checkbox-container input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .checkbox-container span {
            font-weight: 600;
            color: #4a5568;
            font-size: 1.25rem;
            transition: color 0.2s;
        }
        .checkbox-container.selected span {
            color: #ffffff;
        }
        #start-revision-btn:disabled {
            background-color: #cbd5e1;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <!-- Main App Container -->
    <div id="app" class="w-full max-w-lg bg-white rounded-2xl shadow-xl p-8 md:p-10 flex flex-col items-center text-center">
        
        <h1 class="text-3xl md:text-4xl font-extrabold text-indigo-600 mb-2">Kotoba Revision</h1>
        <p class="text-gray-500 mb-8">Choose your revision style to begin.</p>

        <!-- Lesson Selection Section -->
        <div id="lesson-selection" class="w-full space-y-4">
            <h2 class="text-xl font-bold mb-4">Select Lessons</h2>
            <div id="lesson-checkboxes" class="grid grid-cols-5 md:grid-cols-7 gap-4 justify-center">
                <!-- Lesson checkboxes will be dynamically added here -->
            </div>
            
            <div class="flex flex-col items-center mt-6">
                <button id="start-revision-btn" class="bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-indigo-600 transition-colors w-full" disabled>
                    Start Revision
                </button>
            </div>
        </div>

        <!-- Mode Selection Section -->
        <div id="mode-selection" class="w-full space-y-4 hidden relative">
            <h2 class="text-xl font-bold mb-4">Choose a Revision Mode</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                <button id="manual-word-mode-btn" class="mode-btn bg-emerald-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-emerald-600 transition-colors">
                    Manual (Word First)
                </button>
                <button id="manual-meaning-mode-btn" class="mode-btn bg-rose-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-rose-600 transition-colors">
                    Manual (Meaning First)
                </button>
                <button id="timed-word-mode-btn" class="mode-btn bg-sky-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-sky-600 transition-colors">
                    Timed (Word First)
                </button>
                <button id="timed-meaning-mode-btn" class="mode-btn bg-purple-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-purple-600 transition-colors">
                    Timed (Meaning First)
                </button>
            </div>

            <!-- Customize Button is now centered and below the main mode buttons -->
            <button id="customize-btn" class="w-full mt-4 text-indigo-500 font-semibold py-2 px-4 rounded-full border border-indigo-500 hover:bg-indigo-50 transition-colors">
                Customize Timed Settings
            </button>
            
            <button id="back-to-lessons-btn" class="text-gray-500 font-medium hover:text-gray-700 transition-colors mt-4">
                ‚Üê Back to Lessons
            </button>
        </div>

        <!-- Timer Settings Section -->
        <div id="settings-screen" class="w-full space-y-4 hidden">
            <h2 class="text-xl font-bold text-gray-700">Customize Timed Mode</h2>
            <p class="text-gray-500 text-sm mb-4">Set the timers for your timed revision sessions.</p>
            <div class="flex flex-col sm:flex-row items-center gap-4">
                <div class="flex-1 w-full">
                    <label for="flip-delay" class="block text-sm font-medium text-gray-600 mb-1">Flip Delay (seconds)</label>
                    <input type="number" id="flip-delay" value="3" min="1" class="w-full px-4 py-2 border border-gray-300 rounded-full text-center focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="flex-1 w-full">
                    <label for="next-delay" class="block text-sm font-medium text-gray-600 mb-1">Next Card Delay (seconds)</label>
                    <input type="number" id="next-delay" value="2" min="1" class="w-full px-4 py-2 border border-gray-300 rounded-full text-center focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
            </div>
            <button id="back-from-settings-btn" class="text-gray-500 font-medium hover:text-gray-700 transition-colors mt-4">
                ‚Üê Back to Modes
            </button>
        </div>

        <!-- Flashcard & Revision Section -->
        <div id="revision-section" class="w-full hidden flex flex-col items-center">
            
            <!-- New Word Count Display -->
            <div class="mb-4 text-center">
                <p id="progress-display" class="text-xl font-bold text-indigo-600"></p>
                <p id="word-count-display" class="text-sm text-gray-500"></p>
            </div>

            <!-- The Flashcard -->
            <div class="card-container relative w-full max-w-sm h-56 mb-8">
                <div id="flashcard" class="flashcard">
                    <!-- Card Front -->
                    <div id="card-front" class="card-face">
                        <p id="card-front-text" class="text-2xl font-bold text-gray-700 mb-2"></p>
                    </div>
                    <!-- Card Back -->
                    <div id="card-back" class="card-face card-back">
                        <p id="card-back-text" class="text-2xl font-bold text-gray-700 mb-2"></p>
                    </div>
                </div>
            </div>

            <!-- Buttons for Revision -->
            <div class="flex flex-col sm:flex-row gap-4 mb-4">
                <button id="previous-word-btn" class="flex-1 bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-full shadow-md hover:bg-gray-400 transition-colors">
                    Previous Word
                </button>
                <button id="pause-btn" class="flex-1 bg-yellow-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-yellow-600 transition-colors">
                    Pause
                </button>
                <button id="restart-btn" class="flex-1 bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-full shadow-md hover:bg-gray-400 transition-colors">
                    Restart
                </button>
                <button id="next-word-btn" class="flex-1 bg-indigo-500 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-indigo-600 transition-colors">
                    Next Word
                </button>
            </div>
            <button id="back-from-revision-btn" class="text-gray-500 font-medium hover:text-gray-700 transition-colors mt-4">
                ‚Üê Back to Lessons
            </button>

            <!-- Status Messages & Timer -->
            <p id="timer-display" class="mt-2 font-medium text-sm text-gray-500"></p>
            <p id="status-message" class="mt-4 font-bold text-lg"></p>

        </div>

        <!-- Finish Screen -->
        <div id="finish-screen" class="w-full hidden flex flex-col items-center justify-center h-full text-center">
            <div class="finish-animation p-8 bg-white rounded-xl shadow-xl">
                <p id="finish-message" class="text-3xl font-extrabold text-green-600 mb-2">üéâ Well Done! üéâ</p>
                <p class="text-xl font-bold text-gray-700 mb-4">You've finished this set!</p>
                <p id="finish-timer" class="text-gray-500">Returning to lessons in 5 seconds...</p>
            </div>
        </div>

    </div>

    <script>
        const vocabularyData = {
            "Lesson 1": [
                { kanji: "„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", hiragana: "„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", meaning: "Good morning" },
                { kanji: "„Åì„Çì„Å´„Å°„ÅØ", hiragana: "„Åì„Çì„Å´„Å°„ÅØ", meaning: "Hello, Good afternoon" },
                { kanji: "„Åì„Çì„Å∞„Çì„ÅØ", hiragana: "„Åì„Çì„Å∞„Çì„ÅØ", meaning: "Good evening" },
                { kanji: "„Åä„ÇÑ„Åô„Åø", hiragana: "„Åä„ÇÑ„Åô„Åø", meaning: "Good night" },
                { kanji: "„Åï„Çà„ÅÜ„Å™„Çâ", hiragana: "„Åï„Çà„ÅÜ„Å™„Çâ", meaning: "Goodbye" },
                { kanji: "„ÅÇ„Çä„Åå„Å®„ÅÜ", hiragana: "„ÅÇ„Çä„Åå„Å®„ÅÜ", meaning: "Thank you" },
                { kanji: "„Åô„Åø„Åæ„Åõ„Çì", hiragana: "„Åô„Åø„Åæ„Åõ„Çì", meaning: "Excuse me, Sorry" },
                { kanji: "„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ", hiragana: "„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ", meaning: "I'm sorry" },
                { kanji: "„ÅÑ„Åü„Å†„Åç„Åæ„Åô", hiragana: "„ÅÑ„Åü„Å†„Åç„Åæ„Åô", meaning: "I humbly receive (before eating)" },
                { kanji: "„Åî„Å°„Åù„ÅÜ„Åï„Åæ„Åß„Åó„Åü", hiragana: "„Åî„Å°„Åù„ÅÜ„Åï„Åæ„Åß„Åó„Åü", meaning: "Thank you for the meal (after eating)" }
            ],
            "Lesson 2": [
                { kanji: "„ÅØ„ÅÑ", hiragana: "„ÅØ„ÅÑ", meaning: "Yes" },
                { kanji: "„ÅÑ„ÅÑ„Åà", hiragana: "„ÅÑ„ÅÑ„Åà", meaning: "No" },
                { kanji: "„Åä„Å™„Åæ„Åà„ÅØÔºü", hiragana: "„Åä„Å™„Åæ„Åà„ÅØÔºü", meaning: "What is your name?" },
                { kanji: "„Çè„Åü„Åó„ÅØ", hiragana: "„Çè„Åü„Åó„ÅØ", meaning: "I am..." },
                { kanji: "„Åõ„Çì„Åõ„ÅÑ", hiragana: "„Åõ„Çì„Åõ„ÅÑ", meaning: "Teacher" },
                { kanji: "„Åå„Åè„Åõ„ÅÑ", hiragana: "„Åå„Åè„Åõ„ÅÑ", meaning: "Student" },
                { kanji: "„Å®„ÇÇ„Å†„Å°", hiragana: "„Å®„ÇÇ„Å†„Å°", meaning: "Friend" },
                { kanji: "„Å´„Åª„Çì„Åî", hiragana: "„Å´„Åª„Çì„Åî", meaning: "Japanese language" },
                { kanji: "„Åà„ÅÑ„Åî", hiragana: "„Åà„ÅÑ„Åî", meaning: "English language" },
                { kanji: "„Åó„Åî„Å®", hiragana: "„Åó„Åî„Å®", meaning: "Work, job" }
            ],
            "Lesson 3": [
                { kanji: "„Åä„Åí„Çì„Åç„Åß„Åô„ÅãÔºü", hiragana: "„Åä„Åí„Çì„Åç„Åß„Åô„ÅãÔºü", meaning: "How are you?" },
                { kanji: "„Åí„Çì„Åç„Åß„Åô", hiragana: "„Åí„Çì„Åç„Åß„Åô", meaning: "I'm fine" },
                { kanji: "„Åä„ÅÑ„Åè„Å§„Åß„Åô„ÅãÔºü", hiragana: "„Åä„ÅÑ„Åè„Å§„Åß„Åô„ÅãÔºü", meaning: "How old are you?" },
                { kanji: "„Å™„Çì„Åï„ÅÑ„Åß„Åô„ÅãÔºü", hiragana: "„Å™„Çì„Åï„ÅÑ„Åß„Åô„ÅãÔºü", meaning: "How old are you?" },
                { kanji: "„Åã„Åû„Åè", hiragana: "„Åã„Åû„Åè", meaning: "Family" },
                { kanji: "„Åä„Å®„ÅÜ„Åï„Çì", hiragana: "„Åä„Å®„ÅÜ„Åï„Çì", meaning: "Father" },
                { kanji: "„Åä„Åã„ÅÇ„Åï„Çì", hiragana: "„Åä„Åã„ÅÇ„Åï„Çì", meaning: "Mother" },
                { kanji: "„Åç„Çá„ÅÜ„Å†„ÅÑ", hiragana: "„Åç„Çá„ÅÜ„Å†„ÅÑ", meaning: "Siblings" },
                { kanji: "„Åä„Å´„ÅÑ„Åï„Çì", hiragana: "„Åä„Å´„ÅÑ„Åï„Çì", meaning: "Older brother" },
                { kanji: "„ÅÑ„ÇÇ„ÅÜ„Å®", hiragana: "„ÅÑ„ÇÇ„ÅÜ„Å®", meaning: "Younger sister" }
            ],
            "Lesson 4": [
                { kanji: "Â≠¶Ê†°", hiragana: "„Åå„Å£„Åì„ÅÜ", meaning: "School" },
                { kanji: "Â≠¶Áîü", hiragana: "„Åå„Åè„Åõ„ÅÑ", meaning: "Student" },
                { kanji: "ÂÖàÁîü", hiragana: "„Åõ„Çì„Åõ„ÅÑ", meaning: "Teacher" },
                { kanji: "Êú¨", hiragana: "„Åª„Çì", meaning: "Book" },
                { kanji: "Êú∫", hiragana: "„Å§„Åè„Åà", meaning: "Desk" },
                { kanji: "Ê§ÖÂ≠ê", hiragana: "„ÅÑ„Åô", meaning: "Chair" },
                { kanji: "ÈâõÁ≠Ü", hiragana: "„Åà„Çì„Å¥„Å§", meaning: "Pencil" },
                { kanji: "Ê∂à„Åó„Ç¥„É†", hiragana: "„Åë„Åó„Åî„ÇÄ", meaning: "Eraser" },
                { kanji: "„Åã„Å∞„Çì", hiragana: "„Åã„Å∞„Çì", meaning: "Bag" },
                { kanji: "„Éé„Éº„Éà", hiragana: "„Éé„Éº„Éà", meaning: "Notebook" }
            ],
            "Lesson 5": [
                { kanji: "È£ü„Åπ„Çã", hiragana: "„Åü„Åπ„Çã", meaning: "to eat" },
                { kanji: "È£≤„ÇÄ", hiragana: "„ÅÆ„ÇÄ", meaning: "to drink" },
                { kanji: "Ë≤∑„ÅÜ", hiragana: "„Åã„ÅÜ", meaning: "to buy" },
                { kanji: "Ë¶ã„Çã", hiragana: "„Åø„Çã", meaning: "to see, to watch" },
                { kanji: "ËÅû„Åè", hiragana: "„Åç„Åè", meaning: "to listen, to hear" },
                { kanji: "Êõ∏„Åè", hiragana: "„Åã„Åè", meaning: "to write" },
                { kanji: "Ë™≠„ÇÄ", hiragana: "„Çà„ÇÄ", meaning: "to read" },
                { kanji: "Ë©±„Åô", hiragana: "„ÅØ„Å™„Åô", meaning: "to speak" },
                { kanji: "Ë°å„Åè", hiragana: "„ÅÑ„Åè", meaning: "to go" },
                { kanji: "Êù•„Çã", hiragana: "„Åè„Çã", meaning: "to come" }
            ],
            "Lesson 6": [
                { kanji: "ÂÆ∂", hiragana: "„ÅÑ„Åà", meaning: "House" },
                { kanji: "ÈÉ®Â±ã", hiragana: "„Å∏„ÇÑ", meaning: "Room" },
                { kanji: "Âè∞ÊâÄ", hiragana: "„Å†„ÅÑ„Å©„Åì„Çç", meaning: "Kitchen" },
                { kanji: "È¢®ÂëÇ", hiragana: "„Åµ„Çç", meaning: "Bath" },
                { kanji: "„Éà„Ç§„É¨", hiragana: "„Éà„Ç§„É¨", meaning: "Toilet" },
                { kanji: "„Éâ„Ç¢", hiragana: "„Éâ„Ç¢", meaning: "Door" },
                { kanji: "Á™ì", hiragana: "„Åæ„Å©", meaning: "Window" },
                { kanji: "ÈõªÊ∞ó", hiragana: "„Åß„Çì„Åç", meaning: "Electricity, light" },
                { kanji: "ÂÜ∑ËîµÂ∫´", hiragana: "„Çå„ÅÑ„Åû„ÅÜ„Åì", meaning: "Refrigerator" },
                { kanji: "„ÉÜ„É¨„Éì", hiragana: "„ÉÜ„É¨„Éì", meaning: "Television" }
            ],
            "Lesson 7": [
                { kanji: "Â•Ω„Åç", hiragana: "„Åô„Åç", meaning: "Likeable" },
                { kanji: "Â´å„ÅÑ", hiragana: "„Åç„Çâ„ÅÑ", meaning: "Hateable" },
                { kanji: "‰∏äÊâã", hiragana: "„Åò„Çá„ÅÜ„Åö", meaning: "Good at" },
                { kanji: "‰∏ãÊâã", hiragana: "„Å∏„Åü", meaning: "Bad at" },
                { kanji: "ÂÖÉÊ∞ó", hiragana: "„Åí„Çì„Åç", meaning: "Healthy, cheerful" },
                { kanji: "Êöá", hiragana: "„Å≤„Åæ", meaning: "Free time" },
                { kanji: "‰æøÂà©", hiragana: "„Åπ„Çì„Çä", meaning: "Convenient" },
                { kanji: "‰∏ç‰æø", hiragana: "„Åµ„Åπ„Çì", meaning: "Inconvenient" },
                { kanji: "Ë≥ë„ÇÑ„Åã", hiragana: "„Å´„Åé„ÇÑ„Åã", meaning: "Lively" },
                { kanji: "Èùô„Åã", hiragana: "„Åó„Åö„Åã", meaning: "Quiet" }
            ],
            "Lesson 8": [
                { kanji: "È´ò„ÅÑ", hiragana: "„Åü„Åã„ÅÑ", meaning: "Tall, expensive" },
                { kanji: "ÂÆâ„ÅÑ", hiragana: "„ÇÑ„Åô„ÅÑ", meaning: "Cheap" },
                { kanji: "Â§ß„Åç„ÅÑ", hiragana: "„Åä„Åä„Åç„ÅÑ", meaning: "Big" },
                { kanji: "Â∞è„Åï„ÅÑ", hiragana: "„Å°„ÅÑ„Åï„ÅÑ", meaning: "Small" },
                { kanji: "Êñ∞„Åó„ÅÑ", hiragana: "„ÅÇ„Åü„Çâ„Åó„ÅÑ", meaning: "New" },
                { kanji: "Âè§„ÅÑ", hiragana: "„Åµ„Çã„ÅÑ", meaning: "Old" },
                { kanji: "ÁæéÂë≥„Åó„ÅÑ", hiragana: "„Åä„ÅÑ„Åó„ÅÑ", meaning: "Delicious" },
                { kanji: "‰∏çÂë≥„ÅÑ", hiragana: "„Åæ„Åö„ÅÑ", meaning: "Bad-tasting" },
                { kanji: "Êöë„ÅÑ", hiragana: "„ÅÇ„Å§„ÅÑ", meaning: "Hot (weather)" },
                { kanji: "ÂØí„ÅÑ", hiragana: "„Åï„ÇÄ„ÅÑ", meaning: "Cold (weather)" }
            ],
            "Lesson 9": [
                { kanji: "ÊôÇ", hiragana: "„Å®„Åç", meaning: "Time" },
                { kanji: "ÂàÜ", hiragana: "„Åµ„Çì", meaning: "Minute" },
                { kanji: "ÂçàÂâç", hiragana: "„Åî„Åú„Çì", meaning: "AM" },
                { kanji: "ÂçàÂæå", hiragana: "„Åî„Åî", meaning: "PM" },
                { kanji: "‰ªä", hiragana: "„ÅÑ„Åæ", meaning: "Now" },
                { kanji: "Êúù", hiragana: "„ÅÇ„Åï", meaning: "Morning" },
                { kanji: "Êòº", hiragana: "„Å≤„Çã", meaning: "Noon, daytime" },
                { kanji: "Êô©", hiragana: "„Å∞„Çì", meaning: "Evening" },
                { kanji: "Â§ú", hiragana: "„Çà„Çã", meaning: "Night" },
                { kanji: "‰ªäÊó•", hiragana: "„Åç„Çá„ÅÜ", meaning: "Today" }
            ],
            "Lesson 10": [
                { kanji: "Êó•", hiragana: "„Å´„Å°", meaning: "Day" },
                { kanji: "ÈÄ±", hiragana: "„Åó„ÇÖ„ÅÜ", meaning: "Week" },
                { kanji: "Êúà", hiragana: "„Åí„Å§", meaning: "Month" },
                { kanji: "Âπ¥", hiragana: "„Å®„Åó", meaning: "Year" },
                { kanji: "ÂÖàÈÄ±", hiragana: "„Åõ„Çì„Åó„ÇÖ„ÅÜ", meaning: "Last week" },
                { kanji: "‰ªäÈÄ±", hiragana: "„Åì„Çì„Åó„ÇÖ„ÅÜ", meaning: "This week" },
                { kanji: "Êù•ÈÄ±", hiragana: "„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ", meaning: "Next week" },
                { kanji: "ÂÖàÊúà", hiragana: "„Åõ„Çì„Åí„Å§", meaning: "Last month" },
                { kanji: "‰ªäÊúà", hiragana: "„Åì„Çì„Åí„Å§", meaning: "This month" },
                { kanji: "Êù•Êúà", hiragana: "„Çâ„ÅÑ„Åí„Å§", meaning: "Next month" }
            ],
            "Lesson 11": [
                { kanji: "Ë°å„Åè", hiragana: "„ÅÑ„Åè", meaning: "To go" },
                { kanji: "Êù•„Çã", hiragana: "„Åè„Çã", meaning: "To come" },
                { kanji: "Â∏∞„Çã", hiragana: "„Åã„Åà„Çã", meaning: "To return" },
                { kanji: "È£ü„Åπ„Çã", hiragana: "„Åü„Åπ„Çã", meaning: "To eat" },
                { kanji: "È£≤„ÇÄ", hiragana: "„ÅÆ„ÇÄ", meaning: "To drink" },
                { kanji: "ÂØù„Çã", hiragana: "„Å≠„Çã", meaning: "To sleep" },
                { kanji: "Ëµ∑„Åç„Çã", hiragana: "„Åä„Åç„Çã", meaning: "To wake up" },
                { kanji: "Ë¶ã„Çã", hiragana: "„Åø„Çã", meaning: "To see" },
                { kanji: "ËÅû„Åè", hiragana: "„Åç„Åè", meaning: "To listen" },
                { kanji: "Ë©±„Åô", hiragana: "„ÅØ„Å™„Åô", meaning: "To speak" }
            ],
            "Lesson 12": [
                { kanji: "Â±±", hiragana: "„ÇÑ„Åæ", meaning: "Mountain" },
                { kanji: "Â∑ù", hiragana: "„Åã„Çè", meaning: "River" },
                { kanji: "Êµ∑", hiragana: "„ÅÜ„Åø", meaning: "Sea, Ocean" },
                { kanji: "Áî∫", hiragana: "„Åæ„Å°", meaning: "Town" },
                { kanji: "Êùë", hiragana: "„ÇÄ„Çâ", meaning: "Village" },
                { kanji: "ÈÅì", hiragana: "„Åø„Å°", meaning: "Road" },
                { kanji: "Á©∫", hiragana: "„Åù„Çâ", meaning: "Sky" },
                { kanji: "Â§©Ê∞ó", hiragana: "„Å¶„Çì„Åç", meaning: "Weather" },
                { kanji: "Êô¥„Çå", hiragana: "„ÅØ„Çå", meaning: "Sunny weather" },
                { kanji: "Èõ®", hiragana: "„ÅÇ„ÇÅ", meaning: "Rain" }
            ],
            "Lesson 13": [
                { kanji: "ÈõªË©±", hiragana: "„Åß„Çì„Çè", meaning: "Telephone" },
                { kanji: "ÊâãÁ¥ô", hiragana: "„Å¶„Åå„Åø", meaning: "Letter" },
                { kanji: "ÂÜôÁúü", hiragana: "„Åó„ÇÉ„Åó„Çì", meaning: "Photograph" },
                { kanji: "Êñ∞ËÅû", hiragana: "„Åó„Çì„Å∂„Çì", meaning: "Newspaper" },
                { kanji: "ÈõëË™å", hiragana: "„Åñ„Å£„Åó", meaning: "Magazine" },
                { kanji: "ËæûÊõ∏", hiragana: "„Åò„Åó„Çá", meaning: "Dictionary" },
                { kanji: "Âú∞Âõ≥", hiragana: "„Å°„Åö", meaning: "Map" },
                { kanji: "ÊôÇË®à", hiragana: "„Å®„Åë„ÅÑ", meaning: "Clock, watch" },
                { kanji: "ÂÇò", hiragana: "„Åã„Åï", meaning: "Umbrella" },
                { kanji: "Èçµ", hiragana: "„Åã„Åé", meaning: "Key" }
            ],
            "Lesson 14": [
                { kanji: "ÈõªËªä", hiragana: "„Åß„Çì„Åó„ÇÉ", meaning: "Train" },
                { kanji: "„Éê„Çπ", hiragana: "„Éê„Çπ", meaning: "Bus" },
                { kanji: "È£õË°åÊ©ü", hiragana: "„Å≤„Åì„ÅÜ„Åç", meaning: "Airplane" },
                { kanji: "Ëªä", hiragana: "„Åè„Çã„Åæ", meaning: "Car" },
                { kanji: "Ëá™Ëª¢Ëªä", hiragana: "„Åò„Å¶„Çì„Åó„ÇÉ", meaning: "Bicycle" },
                { kanji: "ÈßÖ", hiragana: "„Åà„Åç", meaning: "Station" },
                { kanji: "Á©∫Ê∏Ø", hiragana: "„Åè„ÅÜ„Åì„ÅÜ", meaning: "Airport" },
                { kanji: "„Éê„ÇπÂÅú", hiragana: "„Éê„Çπ„Å¶„ÅÑ", meaning: "Bus stop" },
                { kanji: "ÂàáÁ¨¶", hiragana: "„Åç„Å£„Å∑", meaning: "Ticket" },
                { kanji: "ÈÅãË≥É", hiragana: "„ÅÜ„Çì„Å°„Çì", meaning: "Fare" }
            ],
            "Lesson 15": [
                { kanji: "ÈäÄË°å", hiragana: "„Åé„Çì„Åì„ÅÜ", meaning: "Bank" },
                { kanji: "ÈÉµ‰æøÂ±Ä", hiragana: "„ÇÜ„ÅÜ„Å≥„Çì„Åç„Çá„Åè", meaning: "Post office" },
                { kanji: "ÁóÖÈô¢", hiragana: "„Å≥„Çá„ÅÜ„ÅÑ„Çì", meaning: "Hospital" },
                { kanji: "Âõ≥Êõ∏È§®", hiragana: "„Å®„Åó„Çá„Åã„Çì", meaning: "Library" },
                { kanji: "ÁæéË°ìÈ§®", hiragana: "„Å≥„Åò„ÇÖ„Å§„Åã„Çì", meaning: "Art museum" },
                { kanji: "ÂÖ¨Âúí", hiragana: "„Åì„ÅÜ„Åà„Çì", meaning: "Park" },
                { kanji: "Â∫ó", hiragana: "„Åø„Åõ", meaning: "Store" },
                { kanji: "„É¨„Çπ„Éà„É©„É≥", hiragana: "„É¨„Çπ„Éà„É©„É≥", meaning: "Restaurant" },
                { kanji: "ÈßÖ", hiragana: "„Åà„Åç", meaning: "Station" },
                { kanji: "„Éõ„ÉÜ„É´", hiragana: "„Éõ„ÉÜ„É´", meaning: "Hotel" }
            ],
            "Lesson 16": [
                { kanji: "„ÅäÈáë", hiragana: "„Åä„Åã„Å≠", meaning: "Money" },
                { kanji: "ÂÜÜ", hiragana: "„Åà„Çì", meaning: "Yen (Japanese currency)" },
                { kanji: "Ë≤∑„ÅÑÁâ©", hiragana: "„Åã„ÅÑ„ÇÇ„ÅÆ", meaning: "Shopping" },
                { kanji: "„É¨„Ç∑„Éº„Éà", hiragana: "„É¨„Ç∑„Éº„Éà", meaning: "Receipt" },
                { kanji: "„ÅäÈá£„Çä", hiragana: "„Åä„Å§„Çä", meaning: "Change (money)" },
                { kanji: "ÂÄ§ÊÆµ", hiragana: "„Å≠„Å†„Çì", meaning: "Price" },
                { kanji: "„Çª„Éº„É´", hiragana: "„Çª„Éº„É´", meaning: "Sale" },
                { kanji: "„ÇØ„É¨„Ç∏„ÉÉ„Éà„Ç´„Éº„Éâ", hiragana: "„ÇØ„É¨„Ç∏„ÉÉ„Éà„Ç´„Éº„Éâ", meaning: "Credit card" },
                { kanji: "ÁèæÈáë", hiragana: "„Åí„Çì„Åç„Çì", meaning: "Cash" },
                { kanji: "Â∞èÈä≠", hiragana: "„Åì„Åú„Å´", meaning: "Small change" }
            ],
            "Lesson 17": [
                { kanji: "ÂÆ∂Êóè", hiragana: "„Åã„Åû„Åè", meaning: "Family" },
                { kanji: "‰∏°Ë¶™", hiragana: "„Çä„Çá„ÅÜ„Åó„Çì", meaning: "Parents" },
                { kanji: "Áà∂", hiragana: "„Å°„Å°", meaning: "Father (my own)" },
                { kanji: "ÊØç", hiragana: "„ÅØ„ÅØ", meaning: "Mother (my own)" },
                { kanji: "ÂÖÑ", hiragana: "„ÅÇ„Å´", meaning: "Older brother (my own)" },
                { kanji: "Âßâ", hiragana: "„ÅÇ„Å≠", meaning: "Older sister (my own)" },
                { kanji: "Âºü", hiragana: "„Åä„Å®„ÅÜ„Å®", meaning: "Younger brother (my own)" },
                { kanji: "Â¶π", hiragana: "„ÅÑ„ÇÇ„ÅÜ„Å®", meaning: "Younger sister (my own)" },
                { kanji: "ÂÖÑÂºü", hiragana: "„Åç„Çá„ÅÜ„Å†„ÅÑ", meaning: "Siblings" },
                { kanji: "Â≠ê‰æõ", hiragana: "„Åì„Å©„ÇÇ", meaning: "Child" }
            ],
            "Lesson 18": [
                { kanji: "ÂèãÈÅî", hiragana: "„Å®„ÇÇ„Å†„Å°", meaning: "Friend" },
                { kanji: "ÊÅã‰∫∫", hiragana: "„Åì„ÅÑ„Å≥„Å®", meaning: "Lover, sweetheart" },
                { kanji: "ÁµêÂ©ö", hiragana: "„Åë„Å£„Åì„Çì", meaning: "Marriage" },
                { kanji: "Ë™ïÁîüÊó•", hiragana: "„Åü„Çì„Åò„Çá„ÅÜ„Å≥", meaning: "Birthday" },
                { kanji: "‰ªï‰∫ã", hiragana: "„Åó„Åî„Å®", meaning: "Work" },
                { kanji: "ÂãâÂº∑", hiragana: "„Åπ„Çì„Åç„Çá„ÅÜ", meaning: "Study" },
                { kanji: "Ë∂£Âë≥", hiragana: "„Åó„ÇÖ„Åø", meaning: "Hobby" },
                { kanji: "„Çπ„Éù„Éº„ÉÑ", hiragana: "„Çπ„Éù„Éº„ÉÑ", meaning: "Sports" },
                { kanji: "Èü≥Ê•Ω", hiragana: "„Åä„Çì„Åå„Åè", meaning: "Music" },
                { kanji: "Êò†Áîª", hiragana: "„Åà„ÅÑ„Åå", meaning: "Movie" }
            ],
            "Lesson 19": [
                { kanji: "È£ü„ÅπÁâ©", hiragana: "„Åü„Åπ„ÇÇ„ÅÆ", meaning: "Food" },
                { kanji: "È£≤„ÅøÁâ©", hiragana: "„ÅÆ„Åø„ÇÇ„ÅÆ", meaning: "Drink" },
                { kanji: "„ÅîÈ£Ø", hiragana: "„Åî„ÅØ„Çì", meaning: "Cooked rice, meal" },
                { kanji: "„Éë„É≥", hiragana: "„Éë„É≥", meaning: "Bread" },
                { kanji: "ËÇâ", hiragana: "„Å´„Åè", meaning: "Meat" },
                { kanji: "È≠ö", hiragana: "„Åï„Åã„Å™", meaning: "Fish" },
                { kanji: "ÈáéËèú", hiragana: "„ÇÑ„Åï„ÅÑ", meaning: "Vegetable" },
                { kanji: "ÊûúÁâ©", hiragana: "„Åè„Å†„ÇÇ„ÅÆ", meaning: "Fruit" },
                { kanji: "Ê∞¥", hiragana: "„Åø„Åö", meaning: "Water" },
                { kanji: "„ÅäËå∂", hiragana: "„Åä„Å°„ÇÉ", meaning: "Tea" }
            ],
            "Lesson 20": [
                { kanji: "Êó•Êú¨Ë™û", hiragana: "„Å´„Åª„Çì„Åî", meaning: "Japanese language" },
                { kanji: "Ëã±Ë™û", hiragana: "„Åà„ÅÑ„Åî", meaning: "English language" },
                { kanji: "‰∏≠ÂõΩË™û", hiragana: "„Å°„ÇÖ„ÅÜ„Åî„Åè„Åî", meaning: "Chinese language" },
                { kanji: "ÈüìÂõΩË™û", hiragana: "„Åã„Çì„Åì„Åè„Åî", meaning: "Korean language" },
                { kanji: "Ë©±„Åô", hiragana: "„ÅØ„Å™„Åô", meaning: "To speak" },
                { kanji: "ËÅû„Åè", hiragana: "„Åç„Åè", meaning: "To listen" },
                { kanji: "Ë™≠„ÇÄ", hiragana: "„Çà„ÇÄ", meaning: "To read" },
                { kanji: "Êõ∏„Åè", hiragana: "„Åã„Åè", meaning: "To write" },
                { kanji: "„Çè„Åã„Çã", hiragana: "„Çè„Åã„Çã", meaning: "To understand" },
                { kanji: "„Åß„Åç„Çã", hiragana: "„Åß„Åç„Çã", meaning: "Can do" }
            ],
            "Lesson 21": [
                { kanji: "‰∏ä", hiragana: "„ÅÜ„Åà", meaning: "On, above" },
                { kanji: "‰∏ã", hiragana: "„Åó„Åü", meaning: "Under, below" },
                { kanji: "‰∏≠", hiragana: "„Å™„Åã", meaning: "Inside" },
                { kanji: "Â§ñ", hiragana: "„Åù„Å®", meaning: "Outside" },
                { kanji: "Ââç", hiragana: "„Åæ„Åà", meaning: "In front of, before" },
                { kanji: "Âæå„Çç", hiragana: "„ÅÜ„Åó„Çç", meaning: "Behind, back" },
                { kanji: "Âè≥", hiragana: "„Åø„Åé", meaning: "Right" },
                { kanji: "Â∑¶", hiragana: "„Å≤„Å†„Çä", meaning: "Left" },
                { kanji: "Èö£", hiragana: "„Å®„Å™„Çä", meaning: "Next to" },
                { kanji: "Ëøë„Åè", hiragana: "„Å°„Åã„Åè", meaning: "Near" }
            ],
            "Lesson 22": [
                { kanji: "Âãï„Åè", hiragana: "„ÅÜ„Åî„Åè", meaning: "To move" },
                { kanji: "Ê≠¢„Åæ„Çã", hiragana: "„Å®„Åæ„Çã", meaning: "To stop" },
                { kanji: "ÂÖ•„Çã", hiragana: "„ÅØ„ÅÑ„Çã", meaning: "To enter" },
                { kanji: "Âá∫„Çã", hiragana: "„Åß„Çã", meaning: "To exit" },
                { kanji: "Èñã„Åë„Çã", hiragana: "„ÅÇ„Åë„Çã", meaning: "To open" },
                { kanji: "Èñâ„ÇÅ„Çã", hiragana: "„Åó„ÇÅ„Çã", meaning: "To close" },
                { kanji: "Âßã„Åæ„Çã", hiragana: "„ÅØ„Åò„Åæ„Çã", meaning: "To begin" },
                { kanji: "ÁµÇ„Çè„Çã", hiragana: "„Åä„Çè„Çã", meaning: "To end" },
                { kanji: "‰Ωø„ÅÜ", hiragana: "„Å§„Åã„ÅÜ", meaning: "To use" },
                { kanji: "‰Ωú„Çã", hiragana: "„Å§„Åè„Çã", meaning: "To make" }
            ],
            "Lesson 23": [
                { kanji: "ËÅû„Åç„Åæ„Åô", hiragana: "„Åç„Åç„Åæ„Åô", dictionary: "ËÅû„Åè", meaning: "to ask; to listen" },
                { kanji: "Âõû„Åó„Åæ„Åô", hiragana: "„Åæ„Çè„Åó„Åæ„Åô", dictionary: "Âõû„Åô", meaning: "to turn; to rotate" },
                { kanji: "Âºï„Åç„Åæ„Åô", hiragana: "„Å≤„Åç„Åæ„Åô", dictionary: "Âºï„Åè", meaning: "to pull; to draw" },
                { kanji: "Â§â„Åà„Åæ„Åô", hiragana: "„Åã„Åà„Åæ„Åô", dictionary: "Â§â„Åà„Çã", meaning: "to change; to exchange" },
                { kanji: "Ëß¶„Çä„Åæ„Åô", hiragana: "„Åï„Çè„Çä„Åæ„Åô", dictionary: "Ëß¶„Çã", meaning: "to touch (something)" },
                { kanji: "Âá∫„Åæ„Åô", hiragana: "„Åß„Åæ„Åô", dictionary: "Âá∫„Çã", meaning: "to go out; to leave; to come out; to attend (depends on context)" },
                { kanji: "Ê≠©„Åç„Åæ„Åô", hiragana: "„ÅÇ„Çã„Åç„Åæ„Åô", dictionary: "Ê≠©„Åè", meaning: "to walk" },
                { kanji: "Ê∏°„Çä„Åæ„Åô", hiragana: "„Çè„Åü„Çä„Åæ„Åô", dictionary: "Ê∏°„Çã", meaning: "to cross (a bridge, road, etc.)" },
                { kanji: "Êõ≤„Åå„Çä„Åæ„Åô", hiragana: "„Åæ„Åå„Çä„Åæ„Åô", dictionary: "Êõ≤„Åå„Çã", meaning: "to turn (left/right)" },
                { kanji: "ÂØÇ„Åó„ÅÑ", hiragana: "„Åï„Å≥„Åó„ÅÑ", meaning: "lonely; lonesome" },
                { kanji: "„ÅäÊπØ", hiragana: "„Åä„ÇÜ", meaning: "hot water" },
                { kanji: "Èü≥", hiragana: "„Åä„Å®", meaning: "sound; noise" },
                { kanji: "„Çµ„Ç§„Ç∫", hiragana: "„Çµ„Ç§„Ç∫", meaning: "size" },
                { kanji: "ÊïÖÈöú", hiragana: "„Åì„Åó„Çá„ÅÜ", meaning: "breakdown; failure (of a machine, car, etc.)" },
                { kanji: "ÈÅì", hiragana: "„Åø„Å°", meaning: "street; road; way" },
                { kanji: "‰∫§Â∑ÆÁÇπ", hiragana: "„Åì„ÅÜ„Åï„Å¶„Çì", meaning: "intersection; crossing" },
                { kanji: "‰ø°Âè∑", hiragana: "„Åó„Çì„Åî„ÅÜ", meaning: "traffic light; signal" },
                { kanji: "Ëßí", hiragana: "„Åã„Å©", meaning: "corner (of a street, building, etc.)" },
                { kanji: "Ê©ã", hiragana: "„ÅØ„Åó", meaning: "bridge" },
                { kanji: "ÈßêËªäÂ†¥", hiragana: "„Å°„ÇÖ„ÅÜ„Åó„ÇÉ„Åò„Çá„ÅÜ", meaning: "parking lot" },
                { kanji: "Âª∫Áâ©", hiragana: "„Åü„Å¶„ÇÇ„ÅÆ", meaning: "building" },
                { kanji: "‰ΩïÂõû„ÇÇ", hiragana: "„Å™„Çì„Åã„ÅÑ„ÇÇ", meaning: "many times; over and over" },
                { kanji: "‚ÄïÁõÆ", hiragana: "‚Äï„ÇÅ", meaning: "the ‚Äïth (used for order: e.g. „ÅÑ„Å°„Å∞„Çì„ÇÅ = first, „Å´„Å∞„Çì„ÇÅ = second, etc.)" }
            ],
            "Lesson 24": [
                { kanji: "Âëâ„Çå„Åæ„Åô", hiragana: "„Åè„Çå„Åæ„Åô", dictionary: "„Åè„Çå„Çã", meaning: "to give (to me / my family)" },
                { kanji: "Áõ¥„Åó„Åæ„Åô", hiragana: "„Å™„Åä„Åó„Åæ„Åô", dictionary: "Áõ¥„Åô", meaning: "to repair, fix, correct" },
                { kanji: "ÈÄ£„Çå„Å¶Ë°å„Åç„Åæ„Åô", hiragana: "„Å§„Çå„Å¶„ÅÑ„Åç„Åæ„Åô", dictionary: "ÈÄ£„Çå„Å¶„ÅÑ„Åè", meaning: "to take (a person) along" },
                { kanji: "ÈÄ£„Çå„Å¶Êù•„Åæ„Åô", hiragana: "„Å§„Çå„Å¶„Åç„Åæ„Åô", dictionary: "ÈÄ£„Çå„Å¶„Åè„Çã", meaning: "to bring (a person) along" },
                { kanji: "ÈÄÅ„Çä„Åæ„Åô", hiragana: "„Åä„Åè„Çä„Åæ„Åô", dictionary: "ÈÄÅ„Çã", meaning: "to escort, accompany (a person); also ‚Äúto send‚Äù (letters, parcels, etc.)" },
                { kanji: "Á¥π‰ªã„Åó„Åæ„Åô", hiragana: "„Åó„Çá„ÅÜ„Åã„ÅÑ„Åó„Åæ„Åô", dictionary: "Á¥π‰ªã„Åô„Çã", meaning: "to introduce" },
                { kanji: "Ê°àÂÜÖ„Åó„Åæ„Åô", hiragana: "„ÅÇ„Çì„Å™„ÅÑ„Åó„Åæ„Åô", dictionary: "Ê°àÂÜÖ„Åô„Çã", meaning: "to guide, show around, lead the way" },
                { kanji: "Ë™¨Êòé„Åó„Åæ„Åô", hiragana: "„Åõ„Å§„ÇÅ„ÅÑ„Åô„Çã", dictionary: "Ë™¨Êòé„Åô„Çã", meaning: "to explain" },
                { kanji: "„Åä„Åò„ÅÑ„Åï„Çì", hiragana: "„Åä„Åò„ÅÑ„Åï„Çì", meaning: "grandfather; old man" },
                { kanji: "„Åä„Å∞„ÅÇ„Åï„Çì", hiragana: "„Åä„Å∞„ÅÇ„Åï„Çì", meaning: "grandmother; old woman" },
                { kanji: "„Åò„ÇÖ„Çì„Å≥", hiragana: "„Åò„ÇÖ„Çì„Å≥", meaning: "preparation" },
                { kanji: "Âºï„Å£Ë∂ä„Åó", hiragana: "„Å≤„Å£„Åì„Åó", meaning: "moving (to a new house)" },
                { kanji: "„ÅäËèìÂ≠ê", hiragana: "„Åä„Åã„Åó", meaning: "sweets; snacks" },
                { kanji: "„Éõ„Éº„É†„Çπ„ÉÜ„Ç§", hiragana: "„Éõ„Éº„É†„Çπ„ÉÜ„Ç§", meaning: "homestay (living with a host family)" },
                { kanji: "ÂÖ®ÈÉ®", hiragana: "„Åú„Çì„Å∂", meaning: "all; everything" },
                { kanji: "Ëá™ÂàÜ„Åß", hiragana: "„Åò„Å∂„Çì„Åß", meaning: "by oneself; do it yourself" },
                { kanji: "‰ªñ„Å´", hiragana: "„Åª„Åã„Å´", meaning: "besides; in addition; other" }
            ],
            "Lesson 25": [
                { kanji: "ËÄÉ„Åà„Åæ„Åô", hiragana: "„Åã„Çì„Åå„Åà„Åæ„Åô", dictionary: "ËÄÉ„Åà„Çã", meaning: "to think; to consider" },
                { kanji: "ÁùÄ„Åç„Åæ„Åô", hiragana: "„Å§„Åç„Åæ„Åô", dictionary: "ÁùÄ„Åè", meaning: "to arrive (at a place)" },
                { kanji: "Âèñ„Çä„Åæ„Åô", hiragana: "„Å®„Çä„Åæ„Åô", dictionary: "Âèñ„Çã", meaning: "to grow old; to take" },
                { kanji: "Ë∂≥„Çä„Åæ„Åô", hiragana: "„Åü„Çä„Åæ„Åô", dictionary: "Ë∂≥„Çä„Çã", meaning: "to be enough; to suffice" },
                { kanji: "ÂÑÑ", hiragana: "„Åä„Åè", meaning: "hundred million" },
                { kanji: "Áî∞Ëàé", hiragana: "„ÅÑ„Å™„Åã", meaning: "countryside; hometown" },
                { kanji: "„ÉÅ„É£„É≥„Çπ", hiragana: "„ÉÅ„É£„É≥„Çπ", meaning: "chance; opportunity" },
                { kanji: "ÊÑèÂë≥", hiragana: "„ÅÑ„Åø", meaning: "meaning" },
                { kanji: "Ëª¢Âã§", hiragana: "„Å¶„Çì„Åç„Çì", meaning: "job transfer" },
                { kanji: "‰∫ã", hiragana: "„Åì„Å®", meaning: "thing; matter; fact" },
                { kanji: "Êöá", hiragana: "„Å≤„Åæ", meaning: "free time; leisure" },
                { kanji: "„ÇÇ„Åó", hiragana: "„ÇÇ„Åó", meaning: "if ..." },
                { kanji: "„ÇÇ„Åó„ÇÇ„Åó", hiragana: "„ÇÇ„Åó„ÇÇ„Åó", meaning: "hello (on the phone)" },
                { kanji: "„Åä‰∏ñË©±„Å´„Å™„Çä„Åæ„Åó„Åü", hiragana: "„Åä„Åõ„Çè„Å´„Å™„Çä„Åæ„Åó„Åü", meaning: "Thank you for everything." },
                { kanji: "È†ëÂºµ„Çä„Åæ„Åô", hiragana: "„Åå„Çì„Å∞„Çä„Åæ„Åô", dictionary: "È†ëÂºµ„Çã", meaning: "I‚Äôll do my best." },
                { kanji: "„Å©„ÅÜ„Åû„ÅäÂÖÉÊ∞ó„Åß", hiragana: "„Å©„ÅÜ„Åû„Åä„Åí„Çì„Åç„Åß", meaning: "Please take care of yourself." }
            ]
        };

        // --- DOM Elements ---
        const lessonSelectionSection = document.getElementById('lesson-selection');
        const modeSelectionSection = document.getElementById('mode-selection');
        const settingsScreen = document.getElementById('settings-screen');
        const revisionSection = document.getElementById('revision-section');
        const finishScreen = document.getElementById('finish-screen');
        const lessonCheckboxesContainer = document.getElementById('lesson-checkboxes');
        const startRevisionBtn = document.getElementById('start-revision-btn');
        const customizeBtn = document.getElementById('customize-btn');
        const backFromSettingsBtn = document.getElementById('back-from-settings-btn');
        const manualWordModeBtn = document.getElementById('manual-word-mode-btn');
        const manualMeaningModeBtn = document.getElementById('manual-meaning-mode-btn');
        const timedWordModeBtn = document.getElementById('timed-word-mode-btn');
        const timedMeaningModeBtn = document.getElementById('timed-meaning-mode-btn');
        const backToLessonsBtn = document.getElementById('back-to-lessons-btn');
        const backFromRevisionBtn = document.getElementById('back-from-revision-btn');
        const flashcard = document.getElementById('flashcard');
        const cardFrontText = document.getElementById('card-front-text');
        const cardBackText = document.getElementById('card-back-text');
        const nextWordBtn = document.getElementById('next-word-btn');
        const previousWordBtn = document.getElementById('previous-word-btn');
        const restartBtn = document.getElementById('restart-btn');
        const statusMessage = document.getElementById('status-message');
        const timerDisplay = document.getElementById('timer-display');
        const flipDelayInput = document.getElementById('flip-delay');
        const nextDelayInput = document.getElementById('next-delay');
        const pauseBtn = document.getElementById('pause-btn');

        // New DOM Elements for word count
        const progressDisplay = document.getElementById('progress-display');
        const wordCountDisplay = document.getElementById('word-count-display');

        // --- State Variables ---
        let selectedLessons = [];
        let currentMode = null; // 'manual-word', 'manual-meaning', 'timed-word', 'timed-meaning'
        let shuffledWords = [];
        let currentIndex = 0;
        let nextWordTimer = null;
        let finishTimer = null;
        let isPaused = false;
        let isFlipped = false;
        let timerSecondsLeft = 0;
        let flipDelay = 0;
        let nextDelay = 0;

        // --- Functions ---
        
        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createLessonCheckboxes() {
            const lessonKeys = Object.keys(vocabularyData);

            // Create 'All' checkbox first
            const allContainer = document.createElement('label');
            allContainer.classList.add('checkbox-container');
            allContainer.id = 'all-checkbox-container'; // Add an ID for easy targeting
            
            const allCheckbox = document.createElement('input');
            allCheckbox.type = 'checkbox';
            allCheckbox.name = 'lesson-all';
            allCheckbox.value = 'all';

            const allSpan = document.createElement('span');
            allSpan.textContent = 'All';

            allContainer.appendChild(allCheckbox);
            allContainer.appendChild(allSpan);
            lessonCheckboxesContainer.appendChild(allContainer);

            // Create individual lesson checkboxes
            lessonKeys.forEach(key => {
                const container = document.createElement('label');
                container.classList.add('checkbox-container');
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.name = 'lesson';
                checkbox.value = key;

                const span = document.createElement('span');
                // „É¨„ÉÉ„Çπ„É≥Áï™Âè∑„ÅÆ„Åø„ÇíÂèñÂæó
                span.textContent = key.split(' ')[1];

                container.appendChild(checkbox);
                container.appendChild(span);
                lessonCheckboxesContainer.appendChild(container);
            });
        }

        function clearTimers() {
            if (nextWordTimer) clearInterval(nextWordTimer);
            if (finishTimer) clearInterval(finishTimer);
        }

        function showLessonSelection() {
            clearTimers();
            isPaused = false;
            pauseBtn.textContent = 'Pause';
            lessonSelectionSection.classList.remove('hidden');
            modeSelectionSection.classList.add('hidden');
            settingsScreen.classList.add('hidden');
            revisionSection.classList.add('hidden');
            finishScreen.classList.add('hidden');
            statusMessage.textContent = '';
            timerDisplay.textContent = '';
        }

        function showModeSelection() {
            lessonSelectionSection.classList.add('hidden');
            modeSelectionSection.classList.remove('hidden');
            settingsScreen.classList.add('hidden');
        }

        function showSettingsScreen() {
            modeSelectionSection.classList.add('hidden');
            settingsScreen.classList.remove('hidden');
        }
        
        function handleStartRevision() {
            selectedLessons = Array.from(document.querySelectorAll('input[name="lesson"]:checked')).map(cb => cb.value);
            
            if (selectedLessons.length === 0) {
                // Should not happen as button is disabled, but for safety
                return;
            }
            
            const wordsToShuffle = selectedLessons.flatMap(lessonKey => vocabularyData[lessonKey]);
            shuffledWords = shuffleArray(wordsToShuffle);

            showModeSelection();
        }

        function startRevision(mode) {
            currentMode = mode;
            modeSelectionSection.classList.add('hidden');
            revisionSection.classList.remove('hidden');
            finishScreen.classList.add('hidden');
            
            if (currentMode.includes('timed')) {
                pauseBtn.classList.remove('hidden');
            } else {
                pauseBtn.classList.add('hidden');
            }

            currentIndex = 0;
            flipDelay = parseInt(flipDelayInput.value) || 3;
            nextDelay = parseInt(nextDelayInput.value) || 2;
            isPaused = false;
            isFlipped = false;
            timerSecondsLeft = flipDelay;
            
            // Set the total word count and initial progress
            wordCountDisplay.textContent = `Total words: ${shuffledWords.length}`;
            displayCurrentCard();
        }
        
        function updateCardDisplay() {
            const currentWord = shuffledWords[currentIndex];
            const isWordFirst = currentMode.includes('word');
            
            const frontText = isWordFirst ? 
                (currentWord.dictionary ? `<span class="text-3xl">${currentWord.kanji}</span><br><span class="text-xl text-gray-400 mt-1">${currentWord.hiragana}</span><br><span class="text-lg text-gray-500 mt-1">(${currentWord.dictionary})</span>` : `<span class="text-3xl">${currentWord.kanji}</span><br><span class="text-xl text-gray-400 mt-1">${currentWord.hiragana}</span>`) : 
                `<span class="text-3xl">${currentWord.meaning}</span>`;
            
            const backText = isWordFirst ? 
                `<span class="text-2xl">${currentWord.meaning}</span>` : 
                (currentWord.dictionary ? `<span class="text-3xl">${currentWord.kanji}</span><br><span class="text-xl text-gray-400 mt-1">${currentWord.hiragana}</span><br><span class="text-lg text-gray-500 mt-1">(${currentWord.dictionary})</span>` : `<span class="text-3xl">${currentWord.kanji}</span><br><span class="text-xl text-gray-400 mt-1">${currentWord.hiragana}</span>`);

            // Update the visible front text immediately
            cardFrontText.innerHTML = frontText;

            // This is the key change to fix the visual bug.
            // We delay updating the back text until we are ready to flip,
            // to prevent the new text from being briefly visible.
            cardBackText.innerHTML = backText;
        }

        function displayCurrentCard() {
            clearTimers();
            
            flashcard.classList.remove('is-flipped');
            
            // Update the progress display
            progressDisplay.textContent = `Word ${currentIndex + 1} of ${shuffledWords.length}`;

            // Wait for the CSS transition to complete before showing the next card.
            // This prevents the new content from flashing prematurely.
            setTimeout(() => {
                statusMessage.textContent = '';
                
                if (currentIndex >= shuffledWords.length) {
                    revisionSection.classList.add('hidden');
                    finishScreen.classList.remove('hidden');
                    let finishTimerCounter = 5;
                    const finishTimerDisplay = document.getElementById('finish-timer');
                    finishTimerDisplay.textContent = `Returning to lessons in ${finishTimerCounter} seconds...`;
                    
                    finishTimer = setInterval(() => {
                        finishTimerCounter--;
                        finishTimerDisplay.textContent = `Returning to lessons in ${finishTimerCounter} seconds...`;
                        if (finishTimerCounter <= 0) {
                            clearInterval(finishTimer);
                            showLessonSelection();
                        }
                    }, 1000);
                    return;
                }

                previousWordBtn.disabled = currentIndex === 0 || currentMode.includes('timed');
                nextWordBtn.disabled = currentMode.includes('timed');

                previousWordBtn.classList.toggle('bg-gray-500', currentMode.includes('timed') || currentIndex === 0);
                previousWordBtn.classList.toggle('hover:bg-gray-400', currentMode.includes('timed') || currentIndex === 0);
                nextWordBtn.classList.toggle('bg-gray-500', currentMode.includes('timed'));
                nextWordBtn.classList.toggle('hover:bg-indigo-600', !currentMode.includes('timed'));
                nextWordBtn.classList.toggle('cursor-not-allowed', currentMode.includes('timed'));
                
                isPaused = false;
                pauseBtn.textContent = 'Pause';
                
                updateCardDisplay();

                if (currentMode.includes('timed')) {
                    isFlipped = false;
                    timerSecondsLeft = flipDelay;
                    timerDisplay.textContent = `Flipping in ${timerSecondsLeft} seconds...`;
                    nextWordTimer = setInterval(() => {
                        if (!isPaused) {
                            timerSecondsLeft--;
                            if (!isFlipped) {
                                timerDisplay.textContent = `Flipping in ${timerSecondsLeft} seconds...`;
                                if (timerSecondsLeft <= 0) {
                                    flashcard.classList.add('is-flipped');
                                    isFlipped = true;
                                    timerSecondsLeft = nextDelay;
                                }
                            } else {
                                timerDisplay.textContent = `Next card in ${timerSecondsLeft} seconds...`;
                                if (timerSecondsLeft <= 0) {
                                    currentIndex++;
                                    displayCurrentCard();
                                }
                            }
                        }
                    }, 1000);
                }
            }, 100);
        }

        function togglePause() {
            isPaused = !isPaused;
            if (isPaused) {
                pauseBtn.textContent = 'Resume';
                timerDisplay.textContent = 'Paused';
            } else {
                pauseBtn.textContent = 'Pause';
                if (currentMode.includes('timed')) {
                    if (!isFlipped) {
                        timerDisplay.textContent = `Flipping in ${timerSecondsLeft} seconds...`;
                    } else {
                        timerDisplay.textContent = `Next card in ${timerSecondsLeft} seconds...`;
                    }
                }
            }
        }

        // --- Event Listeners ---
        lessonCheckboxesContainer.addEventListener('change', (event) => {
            const allCheckbox = document.querySelector('input[name="lesson-all"]');
            const lessonCheckboxes = document.querySelectorAll('input[name="lesson"]');
            
            // Handle 'All' checkbox
            if (event.target === allCheckbox) {
                lessonCheckboxes.forEach(cb => {
                    cb.checked = allCheckbox.checked;
                    cb.closest('label').classList.toggle('selected', allCheckbox.checked);
                });
            } else {
                // If any individual lesson is unchecked, uncheck 'All'
                const allChecked = Array.from(lessonCheckboxes).every(cb => cb.checked);
                allCheckbox.checked = allChecked;
            }
            
            // Update the 'selected' class for the clicked checkbox container
            if (event.target.type === 'checkbox') {
                event.target.closest('label').classList.toggle('selected', event.target.checked);
            }
            
            // Update the 'All' checkbox container class based on its state
            allCheckbox.closest('label').classList.toggle('selected', allCheckbox.checked);

            const checkedCount = document.querySelectorAll('input[name="lesson"]:checked').length;
            startRevisionBtn.disabled = checkedCount === 0;
        });


        startRevisionBtn.addEventListener('click', handleStartRevision);
        customizeBtn.addEventListener('click', showSettingsScreen);
        backFromSettingsBtn.addEventListener('click', showModeSelection);

        manualWordModeBtn.addEventListener('click', () => startRevision('manual-word'));
        manualMeaningModeBtn.addEventListener('click', () => startRevision('manual-meaning'));
        timedWordModeBtn.addEventListener('click', () => startRevision('timed-word'));
        timedMeaningModeBtn.addEventListener('click', () => startRevision('timed-meaning'));

        flashcard.addEventListener('click', () => {
            if (!currentMode.includes('timed')) {
                flashcard.classList.toggle('is-flipped');
            }
        });

        backToLessonsBtn.addEventListener('click', showLessonSelection);
        backFromRevisionBtn.addEventListener('click', showLessonSelection);
        
        restartBtn.addEventListener('click', () => {
            clearTimers();
            isPaused = false;
            pauseBtn.textContent = 'Pause';
            
            const wordsToShuffle = selectedLessons.flatMap(lessonKey => vocabularyData[lessonKey]);
            shuffledWords = shuffleArray(wordsToShuffle);
            startRevision(currentMode);
        });

        nextWordBtn.addEventListener('click', () => {
            clearTimers();
            if (currentIndex < shuffledWords.length - 1) {
                currentIndex++;
                displayCurrentCard();
            }
        });

        previousWordBtn.addEventListener('click', () => {
            clearTimers();
            if (currentIndex > 0) {
                currentIndex--;
                displayCurrentCard();
            }
        });
        
        pauseBtn.addEventListener('click', togglePause);

        // Initial setup
        createLessonCheckboxes();
    </script>

</body>
</html>
